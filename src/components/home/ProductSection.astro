---
import { Button } from '../ui/button';
import { getCollection, getEntry } from 'astro:content';
import PopularProduct from '@/components/products/PopularProduct.astro';

const allPopularProducts = await getCollection('items');
---

<section class='py-12'>
  <div class='text-center px-4 max-w-[--max-width-content] mx-auto'>
    <div>
      <strong class='strong font-light'>Popular Choices</strong>
      <h2
        class='text-3xl lg:text-5xl font-bold text-[--clr-green-03] my-4 lg:my-6 font-gothamRounded'
      >
        Popular Products
      </h2>
    </div>
    <ul
      class='my-10 flex flex-col md:flex-row gap-8 flex-wrap md:justify-center'
    >
      {
        allPopularProducts.map((product) => (
          <PopularProduct
            image={product.data.image}
            imageAlt={product.data.imageAlt}
            name={product.data.title}
            price={product.data.price}
            oldPrice={product.data.oldPrice}
            url={product.data.slug}
            sale={product.data.sale}
          />
        ))
      }
    </ul>
    <Button variant={'leaf'} size={'leafLg'}>Our catalogue</Button>
  </div>
</section>
